```instructions
---
description: テストファイルのガイドライン
applyTo: "**/*.{test,spec}.{js,ts,mjs,cjs,jsx,tsx}"
---

# テストガイドライン

## 命名規則

- テストファイルは対象ファイルと同名 + `.test` または `.spec` サフィックス
  - 例: `math.js` → `math.test.js`
- テスト関数名は `<対象関数> + <条件> + <期待結果>` の形式で記述する
  - 例: `"divide throws Error when divisor is zero"`

## 構造（AAA パターン）

すべてのテストケースは以下の構造に従う:

1. **Arrange** — テストデータと前提条件を準備
2. **Act** — テスト対象の関数を実行
3. **Assert** — 結果を検証

## カバレッジ

- 正常系（ハッピーパス）を最低1ケース
- 境界値テスト（0, 空文字, null, 最大値/最小値）
- 異常系（不正入力、エラー発生条件）
- エッジケース（空配列, 重複, 特殊文字）

## 独立性

- テスト間の実行順序に依存しない
- 共有状態を使わない（各テストで独立にセットアップ）
- 外部サービスへの依存はモック化する

## 禁止パターン

- テスト内での `console.log` によるデバッグ（assertion で検証する）
- 1つのテストケースで複数の独立した機能を検証する
- テストデータのハードコード共有（ヘルパー関数で生成する）

```
